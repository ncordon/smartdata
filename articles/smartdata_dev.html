<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contributing to `smartdata` • smartdata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Contributing to `smartdata`">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">smartdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-bars"></span>
     
    Quick reference
  </a>
</li>
<li>
  <a href="../articles/index.html">
    <span class="fa fa-books"></span>
     
    Articles
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ncordon/smartdata">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Contributing to <code>smartdata</code>
</h1>
                        <h4 class="author">Ignacio Cordón</h4>
            
            <h4 class="date">2019-12-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ncordon/smartdata/blob/master/vignettes/smartdata_dev.Rmd"><code>vignettes/smartdata_dev.Rmd</code></a></small>
      <div class="hidden name"><code>smartdata_dev.Rmd</code></div>

    </div>

    
    
<p>The package <code>smartdata</code> aims to provide an useful common interface for a collection of machine learning packages. In other words, it was thought to ease the application of algorithms, since there are plenty of packages in R dedicated to machine learning topics. In addition to this, it offers a pipe operator, through <code>magrittr</code> package, which makes possible to have a nice and convenient workflow of operations.</p>
<p>Since the purpose of this package is to integrate as much packages as possible, all contributions are welcomed. The goal of this vignette is to describe as easily as possible the general structure of the package, so that making contributions gets easier for an external programmer.</p>
<div id="general-structure" class="section level1">
<h1 class="hasAnchor">
<a href="#general-structure" class="anchor"></a>General structure</h1>
<p>The package covers the following topics, each one with its respective <code>.R</code> file in the folder <code>R/</code> and with an associated function:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Topic</th>
<th align="left">File</th>
<th align="left">Wrapper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Oversampling</td>
<td align="left"><code>oversampling.R</code></td>
<td align="left"><code>oversample</code></td>
</tr>
<tr class="even">
<td align="left">Instance selection</td>
<td align="left"><code>instanceSelection.R</code></td>
<td align="left"><code>instance_selection</code></td>
</tr>
<tr class="odd">
<td align="left">Feature selection</td>
<td align="left"><code>featureSelection.R</code></td>
<td align="left"><code>feature_selection</code></td>
</tr>
<tr class="even">
<td align="left">Normalization</td>
<td align="left"><code>normalization.R</code></td>
<td align="left"><code>normalize</code></td>
</tr>
<tr class="odd">
<td align="left">Discretization</td>
<td align="left"><code>discretization.R</code></td>
<td align="left"><code>discretize</code></td>
</tr>
<tr class="even">
<td align="left">Space transformation</td>
<td align="left"><code>spaceTransformation.R</code></td>
<td align="left"><code>space_transformation</code></td>
</tr>
<tr class="odd">
<td align="left">Outliers</td>
<td align="left"><code>outliers.R</code></td>
<td align="left"><code>clean_outliers</code></td>
</tr>
<tr class="even">
<td align="left">Noise</td>
<td align="left"><code>noise.R</code></td>
<td align="left"><code>clean_noise</code></td>
</tr>
<tr class="odd">
<td align="left">Missing values</td>
<td align="left"><code>missingValues.R</code></td>
<td align="left"><code>impute_missing</code></td>
</tr>
</tbody>
</table>
<div id="naming-conventions" class="section level2">
<h2 class="hasAnchor">
<a href="#naming-conventions" class="anchor"></a>Naming conventions</h2>
<p>Inside the package, everything is coded using <a href="https://en.wikipedia.org/wiki/Camel_case"><code>CamelCase</code></a> style, but the API for the functions callable from outside the package, once loaded, is named using <a href="https://en.wikipedia.org/wiki/Snake_case"><code>snake_case</code></a> style. The reason for the former convention is to ensure compatibility with <a href="https://www.tidyverse.org"><code>Tidyverse</code></a> packages, which use that naming convention.</p>
</div>
</div>
<div id="smartdata-r" class="section level1">
<h1 class="hasAnchor">
<a href="#smartdata-r" class="anchor"></a><code>smartdata.R</code>
</h1>
<p>The file <code>R/smartdata.R</code> contains the description of the package, some imports needed for the correct functioning of the software, the definition of the documentation function <code>which_options</code>, which describes the parameters and options available for each method, and the <code>preprocess</code> mappings. To illustrate the purpose of <code>which_options</code> and the <code>preprocess</code> functions, here are some examples:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="../reference/which_options.html">which_options</a></span>(<span class="st">"instance_selection"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt; Possible methods are: 'CNN', 'ENN', 'multiedit', 'FRIS'</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="../reference/which_options.html">which_options</a></span>(<span class="st">"instance_selection"</span>, <span class="st">"multiedit"</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; For more information do: ?class::multiedit </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; Parameters for multiedit are: </span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;   * k: Number of neighbors used in KNN </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt;        Default value: 1 </span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt;   * num_folds: Number of partitions the train set is split in </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt;                Default value: 3 </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;   * null_passes: Number of null passes to use in the algorithm </span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;                  Default value: 5</span></a></code></pre></div>
<p><code>preprocess</code> is an <code>S3</code> method which assigns to an object <code>task</code> the name of the package the method is in as a class, and calls the function which resolves the task (which is going to be another <code>S3</code> method which different for each single package):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">preprocess &lt;-<span class="st"> </span><span class="cf">function</span>(task){</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html">UseMethod</a></span>(<span class="st">"preprocess"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">preprocess.instanceSelection &lt;-<span class="st"> </span><span class="cf">function</span>(task){</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(task) &lt;-<span class="st"> </span>instSelectionPackages[[task<span class="op">$</span>method]]<span class="op">$</span>pkg</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">  <span class="kw">doInstSelection</span>(task)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">}</a></code></pre></div>
</div>
<div id="wrapper-r" class="section level1">
<h1 class="hasAnchor">
<a href="#wrapper-r" class="anchor"></a><code>{wrapper}.R</code>
</h1>
<p>Inside each <code>{wrapper}.R</code> file, we will find, at the top, a declaration of the available methods for that preprocessing with information about the package they come from (<code>pkg</code> slot), and the original name of the method in that package (<code>map</code> slot). For example, for <code>instanceSelection.R</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">instSelectionPackages &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="st">"CNN"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="dt">pkg =</span> <span class="st">"unbalanced"</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">    <span class="dt">map =</span> <span class="st">"ubCNN"</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  ),</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="st">"ENN"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">    <span class="dt">pkg =</span> <span class="st">"unbalanced"</span>,</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">    <span class="dt">map =</span> <span class="st">"ubENN"</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">  ),</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">  <span class="st">"multiedit"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    <span class="dt">pkg       =</span> <span class="st">"class"</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">  ),</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">  <span class="st">"FRIS"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">    <span class="dt">pkg  =</span> <span class="st">"RoughSets"</span>,</a>
<a class="sourceLine" id="cb3-15" data-line-number="15">    <span class="dt">map  =</span> <span class="st">"IS.FRIS.FRST"</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">  )</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">)</a></code></pre></div>
<p>An absent <code>map</code> slot means the method in the origin package coincides with the method name.</p>
<p>From the information above, we know <code>CNN</code> method derives from the <code>unbalanced</code> package and the <code>ubCNN</code> function inside it.</p>
<p>Names of valid methods will be contained in a similar variable:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">instSelectionMethods &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(instSelectionPackages)</a></code></pre></div>
<p>For each method, there should be a declared variable <code>arg.{method}</code> which would contain information for each of the accepted arguments for that method (<code>default</code> values in case those arguments can be omitted when calling the function, a <code>check</code> function to ensure the parameter is passed correctly, and a string of information about the parameter, <code>info</code>, which will be shown if <code>which_options</code> is called with the names of the wrapper and the method). Specifically, package <code>checkmate</code> has been used to provide verbose and compact check functions (curried in the first argument with <code>Curry</code> method from <code>functional</code> package, i.e. the same as writing <code>function(x) { qexpect(x, rules = "foo") }</code>). As example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">args.multiedit &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="dt">k =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">check =</span> <span class="kw">Curry</span>(qexpect, <span class="dt">rules =</span> <span class="st">"X1[1,Inf)"</span>, <span class="dt">label =</span> <span class="st">"k"</span>),</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">info =</span> <span class="st">"Number of neighbors used in KNN"</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="dt">default =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  ),</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  <span class="dt">num_folds =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">    <span class="dt">check =</span> <span class="kw">Curry</span>(qexpect, <span class="dt">rules =</span> <span class="st">"X1[1,Inf)"</span>, <span class="dt">label =</span> <span class="st">"num_folds"</span>),</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">    <span class="dt">info =</span> <span class="st">"Number of partitions the train set is split in"</span>,</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="dt">default =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">    <span class="dt">map =</span> <span class="st">"V"</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">  ),</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">  <span class="dt">null_passes =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">    <span class="dt">check =</span> <span class="kw">Curry</span>(qexpect, <span class="dt">rules =</span> <span class="st">"X1[1,Inf)"</span>, <span class="dt">label =</span> <span class="st">"null_passes"</span>),</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">    <span class="dt">info =</span> <span class="st">"Number of null passes to use in the algorithm"</span>,</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">    <span class="dt">default =</span> <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">    <span class="dt">map =</span> <span class="st">"I"</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18">  )</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">)</a></code></pre></div>
<p>If an argument has a missing <code>default</code> slot, then a value must be provided for it when the function is called.</p>
<p>There should be an <code>S3</code> method which evaluates the wrapper for methods included in a given package. As an example, let’s observe the method that evaluates instance selection using methods from <code>unbalanced</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">doInstSelection.unbalanced &lt;-<span class="st"> </span><span class="cf">function</span>(task){</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  callArgs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/eval.html">eval</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/parse.html">parse</a></span>(<span class="dt">text =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"args."</span>, task<span class="op">$</span>method, <span class="dt">sep =</span> <span class="st">""</span>)))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  callArgs &lt;-<span class="st"> </span><span class="kw">mapArguments</span>(task<span class="op">$</span>args, callArgs)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  classAttr &lt;-<span class="st"> </span>task<span class="op">$</span>classAttr</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  classIndex &lt;-<span class="st"> </span>task<span class="op">$</span>classIndex</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  dataset &lt;-<span class="st"> </span>task<span class="op">$</span>dataset</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  method &lt;-<span class="st"> </span><span class="kw">mapMethod</span>(instSelectionPackages, task<span class="op">$</span>method)</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  <span class="co"># CNN and ENN need minority class as 1, and majority one as 0</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  minorityClass &lt;-<span class="st"> </span><span class="kw">whichMinorityClass</span>(dataset, classAttr)</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">  minority &lt;-<span class="st"> </span><span class="kw">whichMinority</span>(dataset, classAttr)</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">  old_levels &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(dataset[, classIndex])</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">  new_levels &lt;-<span class="st"> </span>old_levels</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">  new_levels[old_levels <span class="op">==</span><span class="st"> </span>minorityClass] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16">  new_levels[old_levels <span class="op">!=</span><span class="st"> </span>minorityClass] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17">  <span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(dataset[, classIndex]) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(new_levels)</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"></a>
<a class="sourceLine" id="cb6-19" data-line-number="19">  callArgs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">X =</span> dataset[, <span class="op">-</span>classIndex], </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">                     <span class="dt">Y =</span> dataset[, classIndex], <span class="dt">verbose =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">                callArgs)</a>
<a class="sourceLine" id="cb6-22" data-line-number="22">  result &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(method, callArgs)</a>
<a class="sourceLine" id="cb6-23" data-line-number="23">  result &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(result<span class="op">$</span>X, result<span class="op">$</span>Y)</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">  <span class="co"># Assign original classAttr name to class column</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25">  <span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(result)[classIndex] &lt;-<span class="st"> </span>classAttr</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">  <span class="co"># Retrieve original levels for class</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27">  <span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(result[, classIndex]) &lt;-<span class="st"> </span>old_levels</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">  <span class="co"># Reset rownames</span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29">  <span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(result) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>()</a>
<a class="sourceLine" id="cb6-30" data-line-number="30"></a>
<a class="sourceLine" id="cb6-31" data-line-number="31">  result</a>
<a class="sourceLine" id="cb6-32" data-line-number="32">}</a></code></pre></div>
<p>A reason to use such an structure (resolve each call grouping methods per origin package instead of treating each method differently) is that methods coming from the same package usually need similar adjustments (for example, order of columns).</p>
<p>Finally, the correspoding wrapper will:</p>
<ul>
<li>Make some basic checks (<code>dataset</code> is a <code>data.frame</code>, <code>class_attr</code> exists in the dataset as a column).</li>
<li>Create a <code>preprocessingTask</code> with the dataset, the type of the preprocessing, the method to use, the <code>classAttr</code> (note the <code>CamelCase</code> style), and further arguments for the method that will be stored as a variable <code>args</code> inside the task.</li>
<li>Call the <code>preprocess</code> function</li>
<li>Output the result</li>
</ul>
<p>As an example, the <code>instance_selection</code> wrapper:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">instance_selection &lt;-<span class="st"> </span><span class="cf">function</span>(dataset, method, <span class="dt">class_attr =</span> <span class="st">"Class"</span>, ...){</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  classAttr &lt;-<span class="st"> </span>class_attr</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="kw">checkDataset</span>(dataset)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  <span class="kw">checkDatasetClass</span>(dataset, classAttr)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  method &lt;-<span class="st"> </span><span class="kw">matchArg</span>(method, instSelectionMethods)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"></a>
<a class="sourceLine" id="cb7-8" data-line-number="8">  <span class="co"># Perform instance selection</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9">  task &lt;-<span class="st"> </span><span class="kw">preprocessingTask</span>(dataset, <span class="st">"instanceSelection"</span>, method, classAttr, ...)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">  dataset &lt;-<span class="st"> </span><span class="kw">preprocess</span>(task)</a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">  dataset</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">}</a></code></pre></div>
</div>
<div id="utils-r" class="section level1">
<h1 class="hasAnchor">
<a href="#utils-r" class="anchor"></a><code>utils.R</code>
</h1>
<p>The file <code>utils.R</code> contains helpers to assist in the coding process. Most useful ones are:</p>
<ul>
<li>
<code>checkDataset</code>: given a variable returns whether its class is <code>data.frame</code>.</li>
<li>
<code>checkDatasetClass</code>: checks whether a certain class variable is present in a <code>data.frame</code>
</li>
<li>
<code>mapArguments</code>: used inside <code>doInstSelection.unbalanced</code> for example, it matches a list of arguments (present in <code>...</code> argument passed to the corresponding wrapper) against <code>args.CNN</code> or <code>args.ENN</code>, in the case of <code>unbalanced</code> package, maps its names to the original names the origin package needs and substitutes default arguments.</li>
<li>
<code>mapMethod</code>: given a packages list and a name of method, returns the function to evaluate (that is, returns <code>pkg::method</code> function, that can be evaluated with <code>do.call</code> and a list of arguments).</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#general-structure">General structure</a><ul class="nav nav-pills nav-stacked">
<li><a href="#naming-conventions">Naming conventions</a></li>
      </ul>
</li>
      <li><a href="#smartdata-r"><code>smartdata.R</code></a></li>
      <li><a href="#wrapper-r"><code>{wrapper}.R</code></a></li>
      <li><a href="#utils-r"><code>utils.R</code></a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ignacio Cordón, Francisco Charte, Julián Luengo, Salvador García, Francisco Herrera.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
